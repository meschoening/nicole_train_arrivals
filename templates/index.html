{% extends "_layout.html" %}
{% set page_title = "Device Home" %}
{% set page_subtitle = "Remote control dashboard for Nicole's Train Tracker" %}
{% set active_page = "" %}

{% block head_extra %}
<style>
  .update-actions {
    margin-top: 12px;
  }
</style>
{% endblock %}

{% block content %}
<div class="content-grid">
  <div class="card">
    <div class="card-title">Device snapshot</div>
    <div class="field">
      <div class="field-label">
        <strong>Device IP</strong>
        <span class="field-hint">Current network address</span>
      </div>
      <div class="field-control">
        <span class="mono">{{ device_ip }}</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>Tailscale address</strong>
        <span class="field-hint">Remote access endpoint</span>
      </div>
      <div class="field-control">
        <span class="mono">{{ tailscale_address }}</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>Commit version</strong>
        <span class="field-hint">Latest deployed build</span>
      </div>
      <div class="field-control">
        <span class="mono">{{ commit_version }}</span>
      </div>
    </div>
  </div>

  <div class="split-grid">
    <div class="card">
      <div class="card-title">Security status</div>
      {% if not ssl_enabled %}
      <div class="notice warning">
        <strong>SSL certificates missing.</strong> Running without HTTPS encryption.
      </div>
      {% else %}
      <div class="notice success">HTTPS certificates are active.</div>
      {% endif %}
    </div>

    <div class="card">
      <div class="card-title">Software updates</div>
      {% if update_available %}
      <div class="notice success">
        Update available. Install the latest release when you're ready.
      </div>
      <div class="field-control update-actions">
        <a class="button button-primary" href="{{ url_for('get_update') }}">Open updater</a>
      </div>
      {% else %}
      <div class="notice">You're on the latest available version.</div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
